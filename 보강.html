<!DOCTYPE html='ko'>
<html>
  <head>
    <script>
      //강의시간에 보여주셨던 것
      window.clicked = false;
      function game() {
        if(window.clicked) {
          window.clicked = false;
          window.reject("실패");
        }
        else {
          window.clicked = true;

          const pro = new Promise(function (resolve, reject){
            window.reject = reject;
            setTimeout(function(){
              resolve("성공");
            }, 3000);
          });
          pro
          .then(function(res) {
            window.clicked = false;
            alert(res);
          })
          .catch(function (err){
            window.clicked = false;
            alert(err);
          });
        }

      }

      //내가 짠 것
      //게임 설명 : 애국가 1절만 한 문장씩 배열 안에 저장해놓고, 그 구절을 랜덤으로 띄워 사용자가 똑같이 문장을 10초 안에 입력하면 성공하는 게임
      const verses = [
        "동해물과 백두산이 마르고 닳도록",
        "하느님이 보우하사 우리나라 만세",
        "무궁화 삼천리 화려강산",
        "대한사람 대한으로 길이 보전하세",
      ];

      function getrandomVerse() { //랜덤으로 한 문장 호출하는 함수
        verse = verses[Math.floor(Math.random() * verses.length)];
        const verseElement = document.getElementById('verse');
        verseElement.textContent = verse;
      }
      
      const typingElement = document.getElementById('typing');
      const resultElement = document.getElementById('result');

      function check() {  
        const typing = typingElement.value.trim();
        if(typing !== verse) {
          window.reject("실패");
        } else {
          const timerPro = new Promise(function (resolve, reject){
            window.reject = reject;
            setTimeout(function(){
            resolve("성공");
          }, 10000);
        });
        timerPro
        .then(function(res) {
          result.textContent = res;
        })
        .catch(function(err){
          result.textContent = err;
        });
        }
      }

      
      // typingElement.addEventListener("keyup", (event) => {
      //   if (event.keyCode === 13) {
      //     check(event);
      //   }
      // });

      
    </script>
  </head>
  <body>
    <button onclick="game()"> game </button>
    <hr>
    <button onclick="getrandomVerse()"> 랜덤 문장 생성 </button>
    <p id="verse"></p>
    <input type="text" id="typing">
    <button onclick="check()"> 티이핑 완료 </button>
    <p id="result"></p>
  </body>
</html>